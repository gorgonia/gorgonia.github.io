<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.58.3"><meta name=description content="Gorgonia: Deep learning for Go - Write and evaluate mathematical equations involving multidimensional arrays (tensors) easily - this is the reference website with tutorials and howtos"><meta name=author content="The Gorgonia Authors"><link rel="shortcut icon" href=/images/favicon.png type=image/png><title>Troubleshoot GPU Issues :: Gorgonia</title><link href=/css/nucleus.css?1677767295 rel=stylesheet><link href=/css/fontawesome-all.min.css?1677767295 rel=stylesheet><link href=/css/hybrid.css?1677767295 rel=stylesheet><link href=/css/featherlight.min.css?1677767295 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1677767295 rel=stylesheet><link href=/css/auto-complete.css?1677767295 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1677767295 rel=stylesheet><link href=/css/theme.css?1677767295 rel=stylesheet><link href=/css/hugo-theme.css?1677767295 rel=stylesheet><link href=/css/theme-gorgonia.css?1677767295 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1677767295></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script><meta property=og:title content="Troubleshoot GPU Issues"><meta property=og:description content="This document is a running list of troubleshooting TODOs. Should you run into issues with GPU usage, this document should help.
The cu package ships with an application called cudatest which will be helpful in troubleshooting issues.
To install cudatest, run
go install gorgonia.org/cu/cmd/cudatest This also assumes that you already have installed CUDA, and cuDNN.
Error in Initialization with Multiple GPUs If you are running multiple GPUs, you might run into a message that looks as follows:"><meta property=og:type content=article><meta property=og:url content=https://gorgonia.org/how-to/troubleshoot-gpu-issues/><meta property=og:image content=https://gorgonia.org/images/opengraph.png><meta property=article:published_time content=2020-07-17T06:24:26+10:00><meta property=article:modified_time content=2020-07-17T06:24:26+10:00><meta property=og:site_name content=Gorgonia><meta name=twitter:card content=summary_large_image><meta name=twitter:image content=https://gorgonia.org/images/opengraph.png><meta name=twitter:title content="Troubleshoot GPU Issues"><meta name=twitter:description content="This document is a running list of troubleshooting TODOs. Should you run into issues with GPU usage, this document should help.
The cu package ships with an application called cudatest which will be helpful in troubleshooting issues.
To install cudatest, run
go install gorgonia.org/cu/cmd/cudatest This also assumes that you already have installed CUDA, and cuDNN.
Error in Initialization with Multiple GPUs If you are running multiple GPUs, you might run into a message that looks as follows:"></head><body data-url=/how-to/troubleshoot-gpu-issues/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=https://gorgonia.org/><img src=https://gorgonia.org/images/logo/gorgonia.svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1677767295></script><script type=text/javascript src=/js/auto-complete.js?1677767295></script><script type=text/javascript>var baseurl="https:\/\/gorgonia.org\/";</script><script type=text/javascript src=/js/search.js?1677767295></script><ul><li><a class=padding><em class="fas fa-language fa-fw"></em><div class=select-style><select id=select-language onchange="location=this.value;">
<option id=en value=https://gorgonia.org/how-to/troubleshoot-gpu-issues/ selected>English</option>
<option id=fr value=https://gorgonia.org/fr/how-to/troubleshoot-gpu-issues/>Fran√ßais</option></select><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><path d="M0 63.75l127.5 127.5L255 63.75z" /></g></g></svg></div></a></li></ul></div><div class=highlightable><ul class=topics><li data-nav-id=/getting-started/ title="Getting Started" class=dd-item><a href=/getting-started/>Getting Started
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/getting-started/ubiquitous-language/ title="Ubiquitous Language and glossary" class=dd-item><a href=/getting-started/ubiquitous-language/>Ubiquitous Language and glossary
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/getting-started/contributing-doc/ title="Start contributing to the doc" class=dd-item><a href=/getting-started/contributing-doc/>Start contributing to the doc
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/about/ title="How Gorgonia works" class=dd-item><a href=/about/>How Gorgonia works
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/about/computation-graph/ title="Computation Graph" class=dd-item><a href=/about/computation-graph/>Computation Graph
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/about/differentiation/ title=Differentiation class=dd-item><a href=/about/differentiation/>Differentiation
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/about/differentiation/autodiff/ title="Automatic Differentiation" class=dd-item><a href=/about/differentiation/autodiff/>Automatic Differentiation
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/about/differentiation/symbolicdiff/ title="Symbolic Differentiation" class=dd-item><a href=/about/differentiation/symbolicdiff/>Symbolic Differentiation
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/tutorials/ title=Tutorials class=dd-item><a href=/tutorials/>Tutorials
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/tutorials/hello-world/ title="Hello World" class=dd-item><a href=/tutorials/hello-world/>Hello World
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tutorials/mnist/ title="Simple Convolution Neural Net (MNIST)" class=dd-item><a href=/tutorials/mnist/>Simple Convolution Neural Net (MNIST)
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tutorials/mnist-cuda/ title="Convnet with CUDA" class=dd-item><a href=/tutorials/mnist-cuda/>Convnet with CUDA
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tutorials/iris/ title="Multivariate linear regression on Iris Dataset" class=dd-item><a href=/tutorials/iris/>Multivariate linear regression on Iris Dataset
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/how-to/ title="How To" class="dd-item
        parent"><a href=/how-to/>How To
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/how-to/troubleshoot-gpu-issues/ title="Troubleshoot GPU Issues" class="dd-item active"><a href=/how-to/troubleshoot-gpu-issues/>Troubleshoot GPU Issues
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/how-to/dot/ title="Drawing the ExprGraph with Graphviz (dot)" class=dd-item><a href=/how-to/dot/>Drawing the ExprGraph with Graphviz (dot)
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/how-to/dataframe/ title="Create a tensor from a Dataframe (gota)" class=dd-item><a href=/how-to/dataframe/>Create a tensor from a Dataframe (gota)
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/how-to/save-weights/ title="Save Weights" class=dd-item><a href=/how-to/save-weights/>Save Weights
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/how-to/autodiff/ title="How to compute gradient (differentiation)" class=dd-item><a href=/how-to/autodiff/>How to compute gradient (differentiation)
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/reference/ title="Reference guide" class=dd-item><a href=/reference/>Reference guide
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/reference/exprgraph/ title="Graph / Exprgraph" class=dd-item><a href=/reference/exprgraph/>Graph / Exprgraph
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/reference/present/ title=Present class=dd-item><a href=/reference/present/>Present
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/reference/cuda/ title="CUDA support" class=dd-item><a href=/reference/cuda/>CUDA support
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/reference/tensor/ title=Tensor class=dd-item><a href=/reference/tensor/>Tensor
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/reference/solver/ title=Solvers class=dd-item><a href=/reference/solver/>Solvers
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/reference/vm/ title=VM class=dd-item><a href=/reference/vm/>VM
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/reference/vm/gomachine/ title="Go Machine" class=dd-item><a href=/reference/vm/gomachine/>Go Machine
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/reference/vm/lispmachine/ title=LispMachine class=dd-item><a href=/reference/vm/lispmachine/>LispMachine
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/reference/vm/tapemachine/ title=Tapemachine class=dd-item><a href=/reference/vm/tapemachine/>Tapemachine
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/misc/ title=Miscellaneous class=dd-item><a href=/misc/>Miscellaneous
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/gorgonia/gorgonia><i class="fab fa-fw fa-github"></i>GitHub repo</a></li><li><a class=padding href="https://pkg.go.dev/gorgonia.org/gorgonia?tab=doc"><i class="fas fa-fw fa-bookmark"></i>API Doc</a></li><li><a class=padding href=http://gophers.slack.com/messages/gorgonia><i class="fab fa-fw fa-slack"></i>Contact us</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i>Clear History</a></li></ul></section><section id=footer><center><a class=github-button href=https://github.com/gorgonia/gorgonia data-icon=octicon-star data-show-count=true aria-label="Star gorgonia/gorgonia on GitHub">Star</a><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></center><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/gorgonia/gorgonia.github.io/edit/develop/content/how-to/troubleshoot-gpu-issues.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://schema.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>main</a> > <a href=/how-to/>How To</a> > Troubleshoot GPU Issues</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#error-in-initialization-with-multiple-gpus>Error in Initialization with Multiple GPUs</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Troubleshoot GPU Issues</h1><p>This document is a running list of troubleshooting TODOs. Should you run into issues with GPU usage, this document should help.</p><p>The <code>cu</code> package ships with an application called <code>cudatest</code> which will be helpful in troubleshooting issues.</p><p>To install <code>cudatest</code>, run</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>go install gorgonia.org/cu/cmd/cudatest</code></pre></div><p>This also assumes that you already have installed CUDA, and cuDNN.</p><h1 id=error-in-initialization-with-multiple-gpus>Error in Initialization with Multiple GPUs</h1><p>If you are running multiple GPUs, you might run into a message that looks as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Error in initialization, please refer to <span style=color:#4e9a06>&#34;https://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__INITIALIZE.html&#34;</span></code></pre></div><p>This usually means that one of your GPUs does not support CUDA. You can still run with CUDA if you know at least one of your GPUs supports CUDA.</p><p>First, use <code>nvidia-smi</code> to find the running GPUs. An example is provided below</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Thu Jul <span style=color:#0000cf;font-weight:700>16</span> <span style=color:#0000cf;font-weight:700>17</span>:41:10 <span style=color:#0000cf;font-weight:700>2020</span>
+-----------------------------------------------------------------------------+
<span style=color:#000;font-weight:700>|</span> NVIDIA-SMI <span style=color:#0000cf;font-weight:700>450</span>.51.05    Driver Version: <span style=color:#0000cf;font-weight:700>450</span>.51.05    CUDA Version: <span style=color:#0000cf;font-weight:700>11</span>.0     <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>-------------------------------+----------------------+----------------------+
<span style=color:#000;font-weight:700>|</span> GPU  Name        Persistence-M<span style=color:#000;font-weight:700>|</span> Bus-Id        Disp.A <span style=color:#000;font-weight:700>|</span> Volatile Uncorr. ECC <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> Fan  Temp  Perf  Pwr:Usage/Cap<span style=color:#000;font-weight:700>|</span>         Memory-Usage <span style=color:#000;font-weight:700>|</span> GPU-Util  Compute M. <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>                               <span style=color:#000;font-weight:700>|</span>                      <span style=color:#000;font-weight:700>|</span>               MIG M. <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span><span style=color:#ce5c00;font-weight:700>===============================</span>+<span style=color:#ce5c00;font-weight:700>======================</span>+<span style=color:#ce5c00;font-weight:700>======================</span><span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>   <span style=color:#0000cf;font-weight:700>0</span>  Tesla K20Xm         On   <span style=color:#000;font-weight:700>|</span> <span style=color:#0000cf;font-weight:700>00000000</span>:06:00.0 Off <span style=color:#000;font-weight:700>|</span>                    <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> N/A   33C    P8    16W / 235W <span style=color:#000;font-weight:700>|</span>      0MiB /  5700MiB <span style=color:#000;font-weight:700>|</span>      <span style=color:#0000cf;font-weight:700>0</span>%      Default <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>                               <span style=color:#000;font-weight:700>|</span>                      <span style=color:#000;font-weight:700>|</span>                  N/A <span style=color:#000;font-weight:700>|</span>
+-------------------------------+----------------------+----------------------+
<span style=color:#000;font-weight:700>|</span>   <span style=color:#0000cf;font-weight:700>1</span>  GeForce GT <span style=color:#0000cf;font-weight:700>1030</span>     On   <span style=color:#000;font-weight:700>|</span> <span style=color:#0000cf;font-weight:700>00000000</span>:07:00.0  On <span style=color:#000;font-weight:700>|</span>                  N/A <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> <span style=color:#0000cf;font-weight:700>35</span>%   33C    P0    N/A /  30W <span style=color:#000;font-weight:700>|</span>    656MiB /  1994MiB <span style=color:#000;font-weight:700>|</span>     <span style=color:#0000cf;font-weight:700>51</span>%      Default <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>                               <span style=color:#000;font-weight:700>|</span>                      <span style=color:#000;font-weight:700>|</span>                  N/A <span style=color:#000;font-weight:700>|</span>
+-------------------------------+----------------------+----------------------+
+-----------------------------------------------------------------------------+
<span style=color:#000;font-weight:700>|</span> Processes:                                                                  <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>  GPU   GI   CI        PID   Type   Process name                  GPU Memory <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>        ID   ID                                                   Usage      <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span><span style=color:#ce5c00;font-weight:700>=============================================================================</span><span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>    <span style=color:#0000cf;font-weight:700>1</span>   N/A  N/A      XXXX      G   /usr/lib/xorg/Xorg                270MiB <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>    <span style=color:#0000cf;font-weight:700>1</span>   N/A  N/A      XXXX      G   /usr/bin/PROGRAMNAME               77MiB <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>    <span style=color:#0000cf;font-weight:700>1</span>   N/A  N/A      XXXX      G   /usr/bin/PROGRAMNAME               68MiB <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>    <span style=color:#0000cf;font-weight:700>1</span>   N/A  N/A      XXXX      G   ...AAAAAAAAA<span style=color:#ce5c00;font-weight:700>=</span> --shared-files      221MiB <span style=color:#000;font-weight:700>|</span>
+-----------------------------------------------------------------------------+</code></pre></div><p>Here, we see that there are two GPUs:</p><ul><li>GPU ID 0 is Tesla K20Xm.</li><li>GPU ID 1 is GeForce GT 1030.</li></ul><p>The GeForce GT 1030 does not supoprt CUDA. While the Tesla K20Xm does. To remedy this, simply add this environment variable:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#000>CUDA_VISIBLE_DEVICES</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0</span> cudatest</code></pre></div><p>Something like the following should be returned:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ <span style=color:#000>CUDA_VISIBLE_DEVICES</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0</span> cudatest
CUDA version: <span style=color:#0000cf;font-weight:700>11000</span>
CUDA devices: <span style=color:#0000cf;font-weight:700>1</span>
Device <span style=color:#000>0</span>
<span style=color:#ce5c00;font-weight:700>========</span>
Name      :     <span style=color:#4e9a06>&#34;Tesla K20Xm&#34;</span>
Clock Rate:     <span style=color:#0000cf;font-weight:700>732000</span> kHz
Memory    :     <span style=color:#0000cf;font-weight:700>5977800704</span> bytes
Compute   :     <span style=color:#0000cf;font-weight:700>3</span>.5</code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/how-to/ title="How To"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/how-to/dot/ title="Drawing the ExprGraph with Graphviz (dot)" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1677767295></script><script src=/js/perfect-scrollbar.min.js?1677767295></script><script src=/js/perfect-scrollbar.jquery.min.js?1677767295></script><script src=/js/jquery.sticky.js?1677767295></script><script src=/js/featherlight.min.js?1677767295></script><script src=/js/modernizr.custom-3.6.0.js?1677767295></script><script src=/js/learn.js?1677767295></script><script src=/js/hugo-learn.js?1677767295></script><link href=/mermaid/mermaid.css?1677767295 rel=stylesheet><script src=/mermaid/mermaid.js?1677767295></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>